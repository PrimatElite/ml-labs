# ml-labs

# Постановка задач

- [Intelligent Placer](https://docs.google.com/document/d/1o0lawEvLgmh9VrA5fUlOHFvo5JKxR4NThCFobmrKz60/edit#)
- [Intelligen Checker](https://docs.google.com/document/d/1Tmn7BLnHXiAsdCpB_GQVDqUx3AoGEdfOoTyn3Eg3P7A/edit#)

# Данные

[Ccылка на данные](https://drive.google.com/drive/folders/1B45ROu8KbjR2S3Wy8mYdcSyMI5RmO-Rr?usp=sharing)

# Правила работы с репозиторием

## Новые фичи и фиксы багов

Все задачи фиксируются на доске проекта Roadmap в этом репозитории. Затем к каждой задаче открывается issue, которое ассайнится на определенного контрибутора.

## Issues workflow

1) Создание нового issue из задачи.
2) Ассайн на конкретного контрибутора (за каждый issue ответственнен 1 человек, но работать над ним можно совместно)
3) Когда issue поступает в работу, оно должно быть перемещено в колонку `In progress` на доске проекта.
4) Под каждое issue создается отдельная ветка, ветка называется так: `<issue_id-short_desc>`

   Например, `2-placer_architecture`

5) Все коммиты в этой ветке должны начинаться с `#<issue_id>`.
6) Все issue-ветки сливаются в ветку `develop` через пулл реквесты.
7) Описания пулл реквестов должны иметь вид `<keyword> #<issue_id>`
где доступные ключевые слова представлены следующим списком

   * close
   * closes
   * closed
   * fix
   * fixes
   * fixed
   * resolve
   * resolves
   * resolved

8) В конце каждого майлстоуна делается пулл реквест `develop -> main`

# Ограничения на входные данные

## Список ограничений

### Фотометрические 

| Чекер                                                        | Плейсер                                                      |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| снято перпендикулярно листу бумаги (угол зрения камеры в небольшом отклонении от вектора (0, 0, -1) через косинусы можно считать например) | диапазон для угла наклона камеры от прямой, перпендикулярной листу бумаги |
| естественный свет/верхний отраженный свет, рассеянное освещение | [зашумленность](https://stackoverflow.com/questions/58924276/detecting-noise-frames) |
| снятно на фоне чистого белого листа формата а4               | предметы не должны перекрывать лист с многоугольником        |
| лист а4 должен быть целиком виден на фото                    | основной фон должен быть однороден по цвету                  |
| высота съемки                                                | [размытость](https://stackoverflow.com/questions/7765810/is-there-a-way-to-detect-if-an-image-is-blurry/7767755#7767755) |
| разрешение фото (ширина, высота, отношение сторон)           | разрешение фото (ширина, высота, отношение сторон)           |
| [зашумленность](https://stackoverflow.com/questions/58924276/detecting-noise-frames) | высота съемки                                                |
| [размытость](https://stackoverflow.com/questions/7765810/is-there-a-way-to-detect-if-an-image-is-blurry/7767755#7767755) | без вспышки                                                  |
| без вспышки                                                  |                                                              |
| не должно быть ярко выраженных теней на листе бумаги         |                                                              |
| основной фон должен быть однороден по цвету                  |                                                              |
| на фотографиях лист должен занимать определённую площадь     |                                                              |

### Размещение объектов на фото
- ограничение на минимум/максимум линейного размера объектов
 - объекты должны распологаться на расстоянии друг от друга а также от края листа (диапазон допустимого расстояния)
 - объекты могут быть повернуты под любым углом относительно оси Z (перпендикулярна плоскости листа) относительно своего "начального положения"

### Ограничения на многоугольник
 - нарисован маркером черного цвета, толщина линии - (диапазон в мм)
 - не более N вершин
 - выпуклый (задаем допустимый диапазон для каждого из углов)
 - отношение площади многоугольника к площади a4 в фиксированном диапазоне
 - допустимо задание в виде списка координат вершин в осях XY (в плоскости листа a4), Цена деления сетки, на которой задан многоугольник - 1 мм
 - с случае задания при помощи маркера, координаты вершин вычисляются по внутреннему контуру границы

### Число объектов на фото
 - на фото может присутствовать от 1 до N объектов
 - все объекты на фото должны принадлежать к разным классам

## Пример указания ограничений в формате yaml

Для полного ознакомления с форматом ограничений рекоммендуется ознакомиться со схемой `restrictions_schema.json`
Также некоторые примеры конфигов можно посмотреть в директории `config_examples`

```yaml
restrictions:
  - name: a
    value:
      - 0.5
      - 4

  - name: c
    value: true

```
## Артефакты, которые можно указывать в конфиге

### Ограничения в формате range
1. Зашумленность
   - name: noise
2. Размытость
   - name: blur
3. Высота съемки
   - name: shooting_height
4. Угол съемки
   - name: shooting_angle
5. Отношение сторон
   - name: aspect_ratio
6. Линейные размеры объектов
   - name: linear_dim
7. Расстояние между объектами
   - name: distance
8. Число вершин многоугольника
   - name: vertex_num
9. Число объектов на фото
   - name: objects_num
10. Ширина изображения 
    - name: width
12. Высота изображения
    - name: height
13. Толщина линии многоугольника
    - name: line_width
14. Отношение площади многоугольника к площади A4
    - name: area_ratio
15. Число одинаковых объектов на фото
    - name: same_objects_num

### Ограничения в формате bool
1. Выпуклость многоугольника
   - name: convex
2. Повороты относительно оси Z
   - name: rotation
3. Перекрытия объектов и многоугольника
   - name: overlap
4. Вспышки
   - name: flash
5. Тени
   - name: shadows

